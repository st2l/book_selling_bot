## Проект для продажи "Книг и методичек"

### Настройка окружения

```bash
cp .env.example .env
```

Какие параметры нужно изменить:

- `SECRET_KEY` - секретный ключ для django
- `ALLOWED_HOSTS` - разрешенные хосты
- `TELEGRAM_BOT_TOKEN` - токен для телеграм-бота
- `DEEPSEEK_API_KEY` - ключ для deepseek
- `YOOKASSA_TOKEN` - токен для оплаты
- `DJANGO_ADMIN_PASSWORD` - пароль для админки

> Убедитесь, что ваш бот подключен к ЮКассе через бота @BotFather

### Как запустить проект

Запуск проекта происходит через docker compose.

```bash
docker compose up --build -d
```

### Как пользоваться БД

##### *Пользователи*

Тут хранятся все пользователи, которые зарегистрировались в боте, включая администратора.
В данной таблице можно менять пользователям права, выдавать им права администратора и так далее.

Что можно менять:
- Имя пользователя
- Пароль
- Права администратора

##### *Тексты бота*

Тут хранятся все тексты, которые используются в боте.

Что можно менять:
- Текст сообщения
ЧТО НЕЛЬЗЯ:
- Наименование сообщения (оно используется в боте)

_Их можно менять, НО нельзя удалять или добавлять новые!_

##### *Доступные пользователю темы*

Тут хранятся все темы, которые используются в боте.
Эти темы пользователь может изменять в ЛК, а также при оформлении подписки.

Что можно менять:
- Название темы (и это все что есть в таблице вообще)

_Их можно менять, НО нельзя удалять или добавлять новые!_

##### *Тарифы подписок*

Что можно менять:
- Наименование подписки
- Описание подписки
- Цена подписки
ЧТО НЕЛЬЗЯ:
- Количество дней

Тут хранятся все тарифы подписок, которые используются в боте.
_Их можно менять, НО нельзя удалять или добавлять новые!_

##### *Пользовательские подписки*

Что можно менять:
- ничего

ЧТО НЕЛЬЗЯ:
- всё

В этом классе хранится информация о купленных подписках пользователей.
Их нельзя менять, иначе пользователи потеряют доступ к контенту, что приведет к недовольству.

##### *Выбранные пользователем темы*

Что можно менять:
- ничего

Тут хранится информация о том, какие темы выбрал пользователь.
Их нельзя менять, иначе пользователи потеряют доступ к контенту (или не тому которому хотели), что приведет к недовольству.

##### *Главы и задания к ним*

Что можно менять:
- Номер главы
- Номер задания

ЧТО НЕЛЬЗЯ:
- Ничего

Тут хранятся все главы и задания к ним.
Прошу также учесть, что номер главы должен быть уникальным для каждого элемента, а то могут возникнуть проблемы. Предусмотрена работа с 1-7 главами.

##### *Ежедневные диалог-задания*

Тут хранится информация о ежедневных диалог-заданиях.
Это задания которые появляются в 10 и 22 часов, меняются ежедневно, в зависимости от того, какой день у пользователя имеется подписка.

Что можно менять:
- День
- Сообщение
- Время дня (утро или вечер, т.е. 10 или 22)

ЧТО НЕЛЬЗЯ:
- Ничего

##### *Истории покупок*

Тут хранятся все истории покупок.

Что можно менять:
- Ничего

ЧТО НЕЛЬЗЯ:
- Всё

В этом классе хранится информация о том, какие товары (методички, краткие методички, книги) были куплены пользователями.
Их нельзя менять, иначе пользователи потеряют доступ к контенту, что приведет к недовольству.

##### *Книги*

Тут хранятся все книги.
Прошу заметить, что согласно функционалу, предусмотрена ОДНА книга.

Что можно менять:
- Наименование книги
- Цена книги
- Описание книги
- Material (файл книги) _ОБЯЗАТЕЛЬНО ДОЛЖЕН БЫТЬ ПРИСВОЕН_

ЧТО НЕЛЬЗЯ:
- Ничего

_Прошу заметить, что материал книги должен быть присвоен, иначе книга не будет работать._
_Также создание новых книг не предусмотрено._

##### *Краткие методички*

Тут хранятся все краткие методички, а именно одна штука.

Что можно менять:
- Наименование методички
- Цена методички
- Описание методички
- Material (файл методички) _ОБЯЗАТЕЛЬНО ДОЛЖЕН БЫТЬ ПРИСВОЕН_

_Прошу заметить, что материал методички должен быть присвоен, иначе методичка не будет работать._
_Также создание новых методичек не предусмотрено._

##### *Методички*

Тут хранятся все методички.

Что можно менять:
- Наименование методички
- Цена методички
- Описание методички
- Material (файл методички) _ОБЯЗАТЕЛЬНО ДОЛЖЕН БЫТЬ ПРИСВОЕН_

_Прошу заметить, что материал методички должен быть присвоен, иначе методичка не будет работать._
_Также создание новых методичек не предусмотрено._ Изначально их 3 штуки.

##### *Ответы на диалоги*

Тут находится информация о том, какие ответы на диалоги были выбраны пользователями.

Что можно менять:
- Ничего

ЧТО НЕЛЬЗЯ:
- Всё

##### *Оценки пользователей*

Тут находится информация о том, какие оценки пользователей были выставлены.

Что можно менять:
- Ничего

ЧТО НЕЛЬЗЯ:
- Всё

##### *Пользовательские уведомления*

Тут хранятся все уведомления, которые созданы пользователями.

Что можно менять:
- Ничего

ЧТО НЕЛЬЗЯ:
- Всё

##### *Решенные пользователем задания*

Тут находится информация о том, какие задания были решены пользователями.

Что можно менять:
- Ничего

ЧТО НЕЛЬЗЯ:
- Всё

##### *Сообщения для рассылки*

Тут можно создавать рассылку для пользователей.


Данные параметры обязательно надо выбрать:
- Сообщение
- Дата отправки
- Тип темы (это темы, которые выбрал пользователь при оформлении подписки)
- Для всех тем (чекбокс, который отправляет сообщение всем пользователям, которые обладают подпиской независимо от того, какие темы они выбрали)
- Фото 1 ... Фото 5 (опционально) Эти фото будут прикреплены к сообщению
- Видео 1 ... Видео 3 (опционально) Эти видео   будут прикреплены к сообщению
- Тип кнопки (тут есть несколько типов кнопок, которые можно выбрать, а также можно выбрать "Нет кнопки" и тогда ее не будет в сообщении)

ЧТО НЕЛЬЗЯ:
- Ничего


